<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IST Admissions - Free Call</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 500px;
            width: 90%;
            text-align: center;
        }
        
        .logo {
            font-size: 2.5em;
            font-weight: bold;
            color: #4a5568;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #718096;
            font-size: 1.2em;
            margin-bottom: 30px;
        }
        
        .call-button {
            background: linear-gradient(45deg, #00c851, #00ff00);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 1.3em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(0,200,81,0.3);
            margin: 20px 0;
        }
        
        .call-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0,200,81,0.4);
        }
        
        .call-button:disabled {
            background: linear-gradient(45deg, #ff6b6b, #ff8e53);
            cursor: not-allowed;
            transform: none;
        }
        
        .status {
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
        }
        
        .status.connecting {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .status.connected {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .features {
            margin: 30px 0;
            text-align: left;
        }
        
        .feature {
            display: flex;
            align-items: center;
            margin: 10px 0;
            color: #4a5568;
        }
        
        .feature-icon {
            margin-right: 10px;
            font-size: 1.2em;
        }
        
        .info-text {
            color: #718096;
            font-size: 0.9em;
            margin-top: 20px;
            line-height: 1.6;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">üéì IST</div>
        <div class="subtitle">Institute of Space Technology</div>
        <div class="subtitle">Admissions Helpline</div>
        
        <button id="callButton" class="call-button pulse" onclick="startCall()">
            üìû Call Admissions Now
        </button>
        
        <div id="status" class="status hidden"></div>
        
        <div class="features">
            <div class="feature">
                <span class="feature-icon">‚úÖ</span>
                <span>Completely FREE - No charges</span>
            </div>
            <div class="feature">
                <span class="feature-icon">ü§ñ</span>
                <span>AI Assistant - Instant answers</span>
            </div>
            <div class="feature">
                <span class="feature-icon">üîí</span>
                <span>Secure & Private</span>
            </div>
            <div class="feature">
                <span class="feature-icon">üì±</span>
                <span>Works on all devices</span>
            </div>
            <div class="feature">
                <span class="feature-icon">üåê</span>
                <span>No software download needed</span>
            </div>
        </div>
        
        <div class="info-text">
            <strong>üáµüá∞ Serving Pakistani Students Nationwide</strong><br>
            Get instant help with admissions, programs, fees, and application process.<br>
            Available 24/7 with professional AI assistance.
        </div>
    </div>

    <script>
        let localStream;
        let pc;
        let roomId = 'ist-admissions-' + Math.random().toString(36).substr(2, 9);
        
        async function startCall() {
            const button = document.getElementById('callButton');
            const status = document.getElementById('status');
            
            try {
                // Update UI
                button.disabled = true;
                button.innerHTML = 'üé§ Connecting...';
                status.className = 'status connecting';
                status.innerHTML = 'üîå Requesting microphone access...';
                status.classList.remove('hidden');
                
                // Get microphone access
                localStream = await navigator.mediaDevices.getUserMedia({ 
                    audio: true, 
                    video: false 
                });
                
                status.innerHTML = 'üìû Connecting to IST Admissions...';
                
                // Create peer connection
                pc = new RTCPeerConnection({
                    iceServers: [
                        { urls: 'stun:stun.l.google.com:19302' }
                    ]
                });
                
                // Add local stream
                localStream.getTracks().forEach(track => {
                    pc.addTrack(track, localStream);
                });
                
                // Here you would connect to your LiveKit room
                // For demo, we'll simulate connection
                setTimeout(() => {
                    button.innerHTML = 'üìû Connected - Speak Now';
                    button.className = 'call-button';
                    status.className = 'status connected';
                    status.innerHTML = '‚úÖ Connected to IST Admissions Assistant<br><small>üó£Ô∏è Speak clearly about your query</small>';
                    
                    // Start voice recognition simulation
                    startVoiceRecognition();
                }, 2000);
                
            } catch (error) {
                console.error('Error:', error);
                status.className = 'status error';
                status.innerHTML = '‚ùå ' + error.message + '<br><small>Please allow microphone access</small>';
                button.disabled = false;
                button.innerHTML = 'üìû Try Again';
            }
        }
        
        function startVoiceRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                const recognition = new SpeechRecognition();
                
                recognition.continuous = true;
                recognition.interimResults = true;
                recognition.lang = 'en-US';
                
                recognition.onresult = function(event) {
                    const current = event.resultIndex;
                    const transcript = event.results[current][0].transcript;
                    
                    if (event.results[current].isFinal) {
                        console.log('User said:', transcript);
                        // Here you would send to your voice agent
                        simulateAgentResponse(transcript);
                    }
                };
                
                recognition.onerror = function(event) {
                    console.error('Speech recognition error:', event.error);
                };
                
                recognition.start();
            }
        }
        
        function simulateAgentResponse(userInput) {
            const responses = [
                "Thank you for calling IST Admissions. How can I help you today?",
                "I can assist you with admission requirements, programs, and fee structure.",
                "What specific information about IST admissions would you like?",
                "Welcome to Institute of Space Technology! I'm here to help with your queries."
            ];
            
            const response = responses[Math.floor(Math.random() * responses.length)];
            console.log('Agent response:', response);
            
            // In real implementation, this would be your voice agent
            speakResponse(response);
        }
        
        function speakResponse(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.9;
                utterance.pitch = 1.0;
                utterance.volume = 1.0;
                speechSynthesis.speak(utterance);
            }
        }
        
        function endCall() {
            if (localStream) {
                localStream.getTracks().forEach(track => track.stop());
            }
            if (pc) {
                pc.close();
            }
            
            const button = document.getElementById('callButton');
            const status = document.getElementById('status');
            
            button.disabled = false;
            button.innerHTML = 'üìû Call Admissions Now';
            button.className = 'call-button pulse';
            status.classList.add('hidden');
        }
        
        // Auto-end call after 5 minutes for demo
        setTimeout(() => {
            if (document.getElementById('callButton').disabled) {
                endCall();
            }
        }, 300000);
    </script>
</body>
</html>